<div class="w-full p-3">

    <!-- Title -->
    <div class="mt-3 text-3xl font-extrabold tracking-tight leading-tight">Change Password</div>

    <!-- Reset password form -->
    <form class="mt-5 custom-form" [formGroup]="changePasswordForm" #changePasswordNgForm="ngForm">

        <!-- Old Password field -->
        <mat-form-field appearance="outline" class="w-full mb-5">
            <mat-label>Old Password</mat-label>
            <input id="old_password" matInput type="password" [formControlName]="'old_password'" #passwordOldField>
            <button mat-icon-button type="button"
                (click)="passwordOldField.type === 'password' ? passwordOldField.type = 'text' : passwordOldField.type = 'password'"
                matSuffix>
                <mat-icon class="icon-size-5" *ngIf="passwordOldField.type === 'password'"
                    [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                <mat-icon class="icon-size-5" *ngIf="passwordOldField.type === 'text'"
                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
            </button>
            <mat-error>
                Password is required
            </mat-error>
        </mat-form-field>

        <!-- Password field -->
        <mat-form-field appearance="outline" class="w-full mb-5">
            <mat-label>New Password</mat-label>
            <input id="password" matInput type="password" [formControlName]="'new_password'" #passwordField>
            <button mat-icon-button type="button"
                (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                matSuffix>
                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'"
                    [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'"
                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
            </button>
            <mat-error>
                Password is required
            </mat-error>
        </mat-form-field>

        <!-- Password confirm field -->
        <mat-form-field appearance="outline" class="w-full mb-5">
            <mat-label>Confirm New Password</mat-label>
            <input id="confirm_password" matInput type="password" [formControlName]="'confirm_password'"
                #passwordConfirmField>
            <button mat-icon-button type="button"
                (click)="passwordConfirmField.type === 'password' ? passwordConfirmField.type = 'text' : passwordConfirmField.type = 'password'"
                matSuffix>
                <mat-icon class="icon-size-5" *ngIf="passwordConfirmField.type === 'password'"
                    [svgIcon]="'heroicons_solid:eye-off'"></mat-icon>
                <mat-icon class="icon-size-5" *ngIf="passwordConfirmField.type === 'text'"
                    [svgIcon]="'heroicons_solid:eye'"></mat-icon>
            </button>
            <mat-error *ngIf="changePasswordForm.get('confirm_password').hasError('required')">
                Password confirmation is required
            </mat-error>
            <mat-error *ngIf="changePasswordForm.get('confirm_password').hasError('mustMatch')">
                Passwords must match
            </mat-error>
        </mat-form-field>

        <!-- Submit button -->
        <div class="flex justify-end">
            <button class="w-full py-6 sm:min-w-30 sm:max-w-30 min-h-11 max-h-11 rounded-md custom-button"
                mat-flat-button [disabled]="changePasswordForm.invalid  || saving" (click)="changePassword()">
                <span *ngIf="!changePasswordForm.disabled" class="text-lg">
                    Confirm
                </span>
                <mat-progress-spinner *ngIf="changePasswordForm.disabled" [diameter]="24" [mode]="'indeterminate'">
                </mat-progress-spinner>
            </button>
        </div>
    </form>
</div>
